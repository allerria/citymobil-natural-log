# Citymobil-natural-log-solution
Решение хакатона от hackmipt[https://hackmipt.com/]. Трек от Ситимобил.

# 1. Соревнование
Необходимо предсказать ожидаемое время поездки такси по данным, имеющимся в момент, когда пользователь нажал кнопку "Заказать".
 
Соревнование на каггле - https://www.kaggle.com/c/final-etarta/leaderboard

Метрика - MAPE
# 2. Воспроизведение результатов
Весь пайплайн разбит на 4 части:
- извлечение признаков из поля route - количество перекрестков, расстояние маршрута(не успели запустить)
- чтение данных, мерж с данными перекрестков
- обработка данных, **извлечение признаков по времени** (день недели, день месяца, выходной), **признаков по расстоянию
 **(расстояние между точками заказа, ожидаемое время, ожидаемая дистанция, количество точек в роуте, дистанция от центра города до начала заказа, дистанция от центра города до пункта назначения, количество перекрестков), **город**
- обучение и отправка предсказаний
## 2.1 Данные
Кладем в папку data в проекте
## 2.2 Извлечение признаков из route
При помощи функции process_road для train, test, val по каждому городу генерятся число перекрестков для каждого роута из каждого города(отдельные файлы для городов). Их необходимо собрать и добавить в папку data/ под названиями {train/val/test}_crossroads.csv
## 2.3 Запустить скрипт run.sh или по очереди
```shell script
python prepare_data.py
python preprocess.py
python train.py
```

# 3. Простое решение
```shell script
python best_solution_monolyth.py
```
